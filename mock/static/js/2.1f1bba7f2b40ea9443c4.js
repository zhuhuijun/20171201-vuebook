webpackJsonp([2],{"1wOi":function(n,e,t){"use strict";var o=t("Lohu"),r=t("TUEb");n.exports=function(n,e,t){e in n?o.f(n,e,r(0,t)):n[e]=t}},"9KWK":function(n,e,t){"use strict";var o=t("tjS7"),r=t("f68a"),a=t("+rd1"),i=t("vs8j"),s=t("rbWp"),c=t("NU3K"),d=t("1wOi"),l=t("wA0X");r(r.S+r.F*!t("Ay/b")(function(n){Array.from(n)}),"Array",{from:function(n){var e,t,r,A,u=a(n),f="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,b=void 0!==p,h=0,g=l(u);if(b&&(p=o(p,v>2?arguments[2]:void 0,2)),void 0==g||f==Array&&s(g))for(e=c(u.length),t=new f(e);e>h;h++)d(t,h,b?p(u[h],h):u[h]);else for(A=g.call(u),t=new f;!(r=A.next()).done;h++)d(t,h,b?i(A,p,[r.value,h],!0):r.value);return t.length=h,t}})},IHPB:function(n,e,t){"use strict";e.__esModule=!0;var o=t("kfHR"),r=function(n){return n&&n.__esModule?n:{default:n}}(o);e.default=function(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return(0,r.default)(n)}},KQcS:function(n,e,t){e=n.exports=t("BkJT")(!0),e.push([n.i,"\n.content ul[data-v-251c6bad] {\n  padding: 10px;\n}\n.content ul li[data-v-251c6bad] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 10px 0;\n  border-bottom: 1px solid #f1f1f1;\n}\n.content ul li img[data-v-251c6bad] {\n  width: 122px;\n  height: 150px;\n}\n.right[data-v-251c6bad] {\n  margin-left: 20px\n}\n.content h4[data-v-251c6bad] {\n  font-size: 20px;\n  line-height: 35px;\n}\n.content p[data-v-251c6bad] {\n  color: #2a2a2a;\n  line-height: 25px;\n}\n.content b[data-v-251c6bad] {\n  color: red;\n  line-height: 25px;\n}\n.content button[data-v-251c6bad] {\n  display: block;\n  width: 70px;\n  height: 25px;\n  outline: none;\n  background: orangered;\n  color: #fff;\n  border: none;\n  border-radius: 15px;\n}\n.more[data-v-251c6bad] {\n  text-align: center;\n  height: 40px;\n  margin: 10px;\n  background: green;\n  line-height: 40px;\n  font-size: 20px;\n  font-weight: bold;\n  display: none;\n}\n","",{version:3,sources:["C:/nodegit/20171129-vuexbook/bookstore/src/components/List.vue"],names:[],mappings:";AACA;EACE,cAAc;CACf;AACD;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,gBAAgB;EAChB,iCAAiC;CAClC;AACD;EACE,aAAa;EACb,cAAc;CACf;AACD;EACE,iBAAiB;CAClB;AACD;EACE,gBAAgB;EAChB,kBAAkB;CACnB;AACD;EACE,eAAe;EACf,kBAAkB;CACnB;AACD;EACE,WAAW;EACX,kBAAkB;CACnB;AACD;EACE,eAAe;EACf,YAAY;EACZ,aAAa;EACb,cAAc;EACd,sBAAsB;EACtB,YAAY;EACZ,aAAa;EACb,oBAAoB;CACrB;AACD;EACE,mBAAmB;EACnB,aAAa;EACb,aAAa;EACb,kBAAkB;EAClB,kBAAkB;EAClB,gBAAgB;EAChB,kBAAkB;EAClB,cAAc;CACf",file:"List.vue",sourcesContent:["\n.content ul[data-v-251c6bad] {\n  padding: 10px;\n}\n.content ul li[data-v-251c6bad] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 10px 0;\n  border-bottom: 1px solid #f1f1f1;\n}\n.content ul li img[data-v-251c6bad] {\n  width: 122px;\n  height: 150px;\n}\n.right[data-v-251c6bad] {\n  margin-left: 20px\n}\n.content h4[data-v-251c6bad] {\n  font-size: 20px;\n  line-height: 35px;\n}\n.content p[data-v-251c6bad] {\n  color: #2a2a2a;\n  line-height: 25px;\n}\n.content b[data-v-251c6bad] {\n  color: red;\n  line-height: 25px;\n}\n.content button[data-v-251c6bad] {\n  display: block;\n  width: 70px;\n  height: 25px;\n  outline: none;\n  background: orangered;\n  color: #fff;\n  border: none;\n  border-radius: 15px;\n}\n.more[data-v-251c6bad] {\n  text-align: center;\n  height: 40px;\n  margin: 10px;\n  background: green;\n  line-height: 40px;\n  font-size: 20px;\n  font-weight: bold;\n  display: none;\n}\n"],sourceRoot:""}])},WL5U:function(n,e,t){var o=t("KQcS");"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);t("8bSs")("7f826996",o,!0)},gJCT:function(n,e,t){t("LniK"),t("9KWK"),n.exports=t("0nnt").Array.from},kfHR:function(n,e,t){n.exports={default:t("gJCT"),__esModule:!0}},tcnj:function(n,e,t){"use strict";function o(n){t("WL5U")}Object.defineProperty(e,"__esModule",{value:!0});var r=t("IHPB"),a=t.n(r),i=t("lC5x"),s=t.n(i),c=t("J0Oq"),d=t.n(c),l=t("UeVD"),A=t("gyMJ"),u={created:function(){this.getServerPage()},data:function(){return{books:[],offset:0,hasMore:!0,isLoading:!1}},components:{MHeader:l.a},mounted:function(){var n=this,e=this.$refs.scroll,t=e.offsetTop,o=0;e.addEventListener("touchstart",function(r){if(0==e.scrollTop&&e.offsetTop==t){var a=r.touches[0].pageY;console.info("start=%d",a);var i=function n(r){var i=r.touches[0].pageY;if(o=i-a,console.info("distance:%d",o),o>0)o<=50?e.style.top=t+o+"px":(e.style.top=t+50+"px",o=50);else try{return e.removeEventListener("touchmove",n),void e.removeEventListener("touchend",s)}catch(n){return void console.error(n)}},s=function r(){clearInterval(n.tt),n.tt=setInterval(function(){if(o<=0)return clearInterval(n.tt),o=0,e.style.top=t+"px",e.removeEventListener("touchmove",i),e.removeEventListener("touchend",r),n.books=[],n.offset=0,n.hasMore=!0,void n.getServerPage();o-=1,e.style.top=t+o+"px"},1)};e.addEventListener("touchmove",i),e.addEventListener("touchend",s)}},!1)},methods:{getServerBooks:function(){var n=this;return d()(s.a.mark(function e(){var t,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.c)();case 2:t=e.sent,o=t.data,n.books=o;case 5:case"end":return e.stop()}},e,n)}))()},remove:function(n){var e=this;return d()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(A.f)(n);case 2:e.books=e.books.filter(function(e){return e.bookId!==n});case 3:case"end":return t.stop()}},t,e)}))()},getServerPage:function(){var n=this;return d()(s.a.mark(function e(){var t,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.hasMore||n.isLoading){e.next=10;break}return n.isLoading=!0,e.next=4,Object(A.e)(n.offset);case 4:t=e.sent,o=t.data,n.books=[].concat(a()(n.books),a()(o.books)),n.hasMore=o.hasMore,n.offset=n.books.length,n.isLoading=!1;case 10:case"end":return e.stop()}},e,n)}))()},loadmore:function(){this.getServerPage()},loadmoreScroll:function(){var n=this;clearTimeout(this.timer),this.timer=setTimeout(function(){var e=n.$refs.scroll,t=e.scrollTop,o=e.clientHeight,r=e.scrollHeight;console.log(1e3),t+o+20>r&&n.getServerPage()},100)}}},f=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("MHeader",{attrs:{back:!0}},[n._v("图书列表")]),n._v(" "),t("div",{ref:"scroll",staticClass:"content",on:{scroll:n.loadmoreScroll}},[t("ul",n._l(n.books,function(e,o){return t("router-link",{key:o,attrs:{to:{name:"detail",params:{bid:e.bookId}},tag:"li"}},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.bookCover,expression:"book.bookCover"}],attrs:{alt:""}}),n._v(" "),t("div",{staticClass:"right"},[t("h4",[n._v(n._s(e.title))]),n._v(" "),t("p",[n._v(n._s(e.bookInfo))]),n._v(" "),t("b",[n._v(n._s(e.bookPrice))]),n._v(" "),t("button",{attrs:{type:"button"},on:{click:function(t){t.stopPropagation(),n.remove(e.bookId)}}},[n._v("删除")])])])})),n._v(" "),t("div",{staticClass:"more",on:{click:n.loadmore}},[n._v("加载更多")])])],1)},v=[],p={render:f,staticRenderFns:v},b=p,h=t("/Xao"),g=o,C=h(u,b,!1,g,"data-v-251c6bad",null);e.default=C.exports}});
//# sourceMappingURL=2.1f1bba7f2b40ea9443c4.js.map